using Avalonia;
using Avalonia.Controls;
using Avalonia.Controls.ApplicationLifetimes;
using Avalonia.Markup.Xaml;
using Avalonia.VisualTree;
using ZenPlatform.ThinClient.ViewModels;
using ZenPlatform.ThinClient.Views;

namespace ZenPlatform.ThinClient
{
    public class App : Application
    {
        public override void Initialize()
        {
            AvaloniaXamlLoader.Load(this);
        }

        public override void OnFrameworkInitializationCompleted()
        {
            if (ApplicationLifetime is IClassicDesktopStyleApplicationLifetime desktopLifetime)
            {
                var view = new DockMainWindowViewModel();

                var xaml = @"
<UserControl xmlns='https://github.com/avaloniaui'
             xmlns:x='http://schemas.microsoft.com/winfx/2006/xaml'
             Width='300'>
    <StackPanel> 
        <TextBlock Text='Store caption' />
        <StackPanel Orientation='Horizontal'>
            <TextBlock Text='Prop1'/>
            <TextBox Text='test' Width='200'/>
        </StackPanel>
        <StackPanel Orientation='Horizontal'>
            <TextBlock Text='Prop2'/>
            <TextBox Text='test' Width='200'/>
        </StackPanel>
    </StackPanel>
</UserControl>";

                var a = new RuntimeModel(xaml, null);
                //var co =  //UIBuilder.GetDesktop();
                
                view.ShowDock(a);
                view.ShowDock(a);
                view.ShowDock(a);
                view.ShowDock(a);

                var obj  = (DockMainWindow)AvaloniaXamlLoader.Parse(xaml2);

                //desktopLifetime.MainWindow = obj; 
                // new DockMainWindow
                // {
                //     DataContext = view,
                // };
            }

            base.OnFrameworkInitializationCompleted();
        }

        private static string xaml2 =
            "<DockMainWindow Background=\"White\" BorderBrush=\"{x:Null}\" CanResize=\"True\" ClipToBounds=\"True\" Focusable=\"False\" FontSize=\"12\" FontStyle=\"Normal\" FontWeight=\"Regular\" Foreground=\"Black\" HasSystemDecorations=\"False\" Height=\"NaN\" HorizontalAlignment=\"Stretch\" HorizontalContentAlignment=\"Stretch\" IsChromeVisible=\"True\" IsEnabled=\"True\" IsHitTestVisible=\"True\" IsVisible=\"False\" MaxHeight=\"Infinity\" MaxWidth=\"Infinity\" MinHeight=\"0\" MinWidth=\"0\" Name=\"{x:Null}\" Opacity=\"1\" OpacityMask=\"{x:Null}\" ShowInTaskbar=\"True\" SizeToContent=\"Manual\" Title=\"Thin client\" Topmost=\"False\" UseLayoutRounding=\"True\" VerticalAlignment=\"Stretch\" VerticalContentAlignment=\"Stretch\" Width=\"NaN\" WindowStartupLocation=\"Manual\" WindowState=\"Normal\" ZIndex=\"0\" xmlns=\"clr-namespace:ZenPlatform.ThinClient.Views;assembly=ZenPlatform.ThinClient\" xmlns:A9Y8E=\"clr-namespace:Avalonia.Collections;assembly=Avalonia.Base\" xmlns:ERWN2=\"clr-namespace:System;assembly=System.ComponentModel\" xmlns:J3PM0=\"clr-namespace:Avalonia;assembly=Avalonia.Visuals\" xmlns:SKB8T=\"clr-namespace:Avalonia.Controls;assembly=Avalonia.Controls\" xmlns:a=\"clr-namespace:Avalonia;assembly=Avalonia.Styling\" xmlns:aa=\"clr-namespace:Avalonia.Animation;assembly=Avalonia.Animation\" xmlns:ac=\"clr-namespace:Avalonia.Controls;assembly=Avalonia.Styling\" xmlns:acp=\"clr-namespace:Avalonia.Controls.Primitives;assembly=Avalonia.Controls\" xmlns:ai=\"clr-namespace:Avalonia.Input;assembly=Avalonia.Input\" xmlns:al=\"clr-namespace:Avalonia.Layout;assembly=Avalonia.Layout\" xmlns:am=\"clr-namespace:Avalonia.Media;assembly=Avalonia.Visuals\" xmlns:amxt=\"clr-namespace:Avalonia.Markup.Xaml.Templates;assembly=Avalonia.Markup.Xaml\" xmlns:as=\"clr-namespace:Avalonia.Styling;assembly=Avalonia.Styling\" xmlns:dac=\"clr-namespace:Dock.Avalonia.Controls;assembly=Dock.Avalonia\" xmlns:s=\"clr-namespace:System;assembly=mscorlib\" xmlns:x=\"http://schemas.microsoft.com/winfx/2006/xaml\">\n  <DockMainWindow.BorderThickness>\n    <J3PM0:Thickness />\n  </DockMainWindow.BorderThickness>\n  <DockMainWindow.Classes>\n    <ac:Classes ResetBehavior=\"Reset\" Validate=\"{x:Null}\" />\n  </DockMainWindow.Classes>\n  <DockMainWindow.Clip>\n    <x:Null />\n  </DockMainWindow.Clip>\n  <DockMainWindow.Clock>\n    <x:Null />\n  </DockMainWindow.Clock>\n  <DockMainWindow.Content>\n    <MainView Background=\"{x:Null}\" BorderBrush=\"{x:Null}\" ClipToBounds=\"True\" Focusable=\"False\" FontSize=\"12\" FontStyle=\"Normal\" FontWeight=\"Regular\" Foreground=\"Black\" Height=\"NaN\" HorizontalAlignment=\"Stretch\" HorizontalContentAlignment=\"Stretch\" IsEnabled=\"True\" IsHitTestVisible=\"True\" IsVisible=\"True\" MaxHeight=\"Infinity\" MaxWidth=\"Infinity\" MinHeight=\"0\" MinWidth=\"0\" Name=\"{x:Null}\" Opacity=\"1\" OpacityMask=\"{x:Null}\" UseLayoutRounding=\"True\" VerticalAlignment=\"Stretch\" VerticalContentAlignment=\"Stretch\" Width=\"NaN\" ZIndex=\"0\">\n      <MainView.BorderThickness>\n        <J3PM0:Thickness />\n      </MainView.BorderThickness>\n      <MainView.Classes>\n        <ac:Classes ResetBehavior=\"Reset\" Validate=\"{x:Null}\" />\n      </MainView.Classes>\n      <MainView.Clip>\n        <x:Null />\n      </MainView.Clip>\n      <MainView.Clock>\n        <x:Null />\n      </MainView.Clock>\n      <MainView.Content>\n        <SKB8T:DockPanel Background=\"{x:Null}\" ClipToBounds=\"False\" Focusable=\"False\" Height=\"NaN\" HorizontalAlignment=\"Stretch\" IsEnabled=\"True\" IsHitTestVisible=\"True\" IsVisible=\"True\" LastChildFill=\"True\" MaxHeight=\"Infinity\" MaxWidth=\"Infinity\" MinHeight=\"0\" MinWidth=\"0\" Name=\"{x:Null}\" Opacity=\"1\" OpacityMask=\"{x:Null}\" UseLayoutRounding=\"True\" VerticalAlignment=\"Stretch\" Width=\"NaN\" ZIndex=\"0\">\n          <SKB8T:DockPanel.Children>\n            <dac:DockControl Background=\"{x:Null}\" BorderBrush=\"{x:Null}\" ClipToBounds=\"True\" Focusable=\"False\" FontSize=\"12\" FontStyle=\"Normal\" FontWeight=\"Regular\" Foreground=\"Black\" Height=\"NaN\" HorizontalAlignment=\"Stretch\" IsEnabled=\"True\" IsHitTestVisible=\"True\" IsVisible=\"True\" MaxHeight=\"Infinity\" MaxWidth=\"Infinity\" MinHeight=\"0\" MinWidth=\"0\" Name=\"dockControl\" Opacity=\"1\" OpacityMask=\"{x:Null}\" UseLayoutRounding=\"True\" VerticalAlignment=\"Stretch\" Width=\"NaN\" ZIndex=\"0\">\n              <dac:DockControl.BorderThickness>\n                <J3PM0:Thickness />\n              </dac:DockControl.BorderThickness>\n              <dac:DockControl.Classes>\n                <ac:Classes ResetBehavior=\"Reset\" Validate=\"{x:Null}\" />\n              </dac:DockControl.Classes>\n              <dac:DockControl.Clip>\n                <x:Null />\n              </dac:DockControl.Clip>\n              <dac:DockControl.Clock>\n                <x:Null />\n              </dac:DockControl.Clock>\n              <dac:DockControl.ContextMenu>\n                <x:Null />\n              </dac:DockControl.ContextMenu>\n              <dac:DockControl.Cursor>\n                <x:Null />\n              </dac:DockControl.Cursor>\n              <dac:DockControl.DataContext>\n                <x:Null />\n              </dac:DockControl.DataContext>\n              <dac:DockControl.FocusAdorner>\n                <amxt:FocusAdornerTemplate x:Name=\"__ReferenceID0\">\n                  <amxt:FocusAdornerTemplate.Content>\n                    <s:Func x:TypeArguments=\"ERWN2:IServiceProvider, x:Object\" />\n                  </amxt:FocusAdornerTemplate.Content>\n                </amxt:FocusAdornerTemplate>\n              </dac:DockControl.FocusAdorner>\n              <dac:DockControl.FontFamily>\n                <am:FontFamily x:Name=\"__ReferenceID1\" />\n              </dac:DockControl.FontFamily>\n              <dac:DockControl.Layout>\n                <x:Null />\n              </dac:DockControl.Layout>\n              <dac:DockControl.Margin>\n                <J3PM0:Thickness />\n              </dac:DockControl.Margin>\n              <dac:DockControl.Padding>\n                <J3PM0:Thickness />\n              </dac:DockControl.Padding>\n              <dac:DockControl.RenderTransform>\n                <x:Null />\n              </dac:DockControl.RenderTransform>\n              <dac:DockControl.RenderTransformOrigin>\n                <J3PM0:RelativePoint />\n              </dac:DockControl.RenderTransformOrigin>\n              <dac:DockControl.Resources>\n                <ac:ResourceDictionary />\n              </dac:DockControl.Resources>\n              <dac:DockControl.Styles>\n                <as:Styles>\n                  <as:Styles.Resources>\n                    <ac:ResourceDictionary />\n                  </as:Styles.Resources>\n                </as:Styles>\n              </dac:DockControl.Styles>\n              <dac:DockControl.Tag>\n                <x:Null />\n              </dac:DockControl.Tag>\n              <dac:DockControl.Template>\n                <amxt:ControlTemplate>\n                  <amxt:ControlTemplate.Content>\n                    <s:Func x:TypeArguments=\"ERWN2:IServiceProvider, x:Object\" />\n                  </amxt:ControlTemplate.Content>\n                  <amxt:ControlTemplate.TargetType>\n                    <x:Null />\n                  </amxt:ControlTemplate.TargetType>\n                </amxt:ControlTemplate>\n              </dac:DockControl.Template>\n              <dac:DockControl.Transitions>\n                <aa:Transitions ResetBehavior=\"Remove\" Validate=\"{x:Null}\" />\n              </dac:DockControl.Transitions>\n            </dac:DockControl>\n          </SKB8T:DockPanel.Children>\n          <SKB8T:DockPanel.Classes>\n            <ac:Classes ResetBehavior=\"Reset\" Validate=\"{x:Null}\" />\n          </SKB8T:DockPanel.Classes>\n          <SKB8T:DockPanel.Clip>\n            <x:Null />\n          </SKB8T:DockPanel.Clip>\n          <SKB8T:DockPanel.Clock>\n            <x:Null />\n          </SKB8T:DockPanel.Clock>\n          <SKB8T:DockPanel.ContextMenu>\n            <x:Null />\n          </SKB8T:DockPanel.ContextMenu>\n          <SKB8T:DockPanel.Cursor>\n            <x:Null />\n          </SKB8T:DockPanel.Cursor>\n          <SKB8T:DockPanel.DataContext>\n            <x:Null />\n          </SKB8T:DockPanel.DataContext>\n          <SKB8T:DockPanel.FocusAdorner>\n            <x:Reference>__ReferenceID0</x:Reference>\n          </SKB8T:DockPanel.FocusAdorner>\n          <SKB8T:DockPanel.Margin>\n            <J3PM0:Thickness />\n          </SKB8T:DockPanel.Margin>\n          <SKB8T:DockPanel.RenderTransform>\n            <x:Null />\n          </SKB8T:DockPanel.RenderTransform>\n          <SKB8T:DockPanel.RenderTransformOrigin>\n            <J3PM0:RelativePoint />\n          </SKB8T:DockPanel.RenderTransformOrigin>\n          <SKB8T:DockPanel.Resources>\n            <ac:ResourceDictionary />\n          </SKB8T:DockPanel.Resources>\n          <SKB8T:DockPanel.Styles>\n            <as:Styles>\n              <as:Styles.Resources>\n                <ac:ResourceDictionary />\n              </as:Styles.Resources>\n            </as:Styles>\n          </SKB8T:DockPanel.Styles>\n          <SKB8T:DockPanel.Tag>\n            <x:Null />\n          </SKB8T:DockPanel.Tag>\n          <SKB8T:DockPanel.Transitions>\n            <aa:Transitions ResetBehavior=\"Remove\" Validate=\"{x:Null}\" />\n          </SKB8T:DockPanel.Transitions>\n        </SKB8T:DockPanel>\n      </MainView.Content>\n      <MainView.ContentTemplate>\n        <x:Null />\n      </MainView.ContentTemplate>\n      <MainView.ContextMenu>\n        <x:Null />\n      </MainView.ContextMenu>\n      <MainView.Cursor>\n        <x:Null />\n      </MainView.Cursor>\n      <MainView.DataContext>\n        <x:Null />\n      </MainView.DataContext>\n      <MainView.FocusAdorner>\n        <x:Reference>__ReferenceID0</x:Reference>\n      </MainView.FocusAdorner>\n      <MainView.FontFamily>\n        <x:Reference>__ReferenceID1</x:Reference>\n      </MainView.FontFamily>\n      <MainView.Margin>\n        <J3PM0:Thickness />\n      </MainView.Margin>\n      <MainView.Padding>\n        <J3PM0:Thickness />\n      </MainView.Padding>\n      <MainView.RenderTransform>\n        <x:Null />\n      </MainView.RenderTransform>\n      <MainView.RenderTransformOrigin>\n        <J3PM0:RelativePoint />\n      </MainView.RenderTransformOrigin>\n      <MainView.Resources>\n        <ac:ResourceDictionary />\n      </MainView.Resources>\n      <MainView.Styles>\n        <as:Styles>\n          <as:Styles.Resources>\n            <ac:ResourceDictionary />\n          </as:Styles.Resources>\n        </as:Styles>\n      </MainView.Styles>\n      <MainView.Tag>\n        <x:Null />\n      </MainView.Tag>\n      <MainView.Template>\n        <amxt:ControlTemplate>\n          <amxt:ControlTemplate.Content>\n            <s:Func x:TypeArguments=\"ERWN2:IServiceProvider, x:Object\" />\n          </amxt:ControlTemplate.Content>\n          <amxt:ControlTemplate.TargetType>\n            <x:Null />\n          </amxt:ControlTemplate.TargetType>\n        </amxt:ControlTemplate>\n      </MainView.Template>\n      <MainView.Transitions>\n        <aa:Transitions ResetBehavior=\"Remove\" Validate=\"{x:Null}\" />\n      </MainView.Transitions>\n    </MainView>\n  </DockMainWindow.Content>\n  <DockMainWindow.ContentTemplate>\n    <x:Null />\n  </DockMainWindow.ContentTemplate>\n  <DockMainWindow.ContextMenu>\n    <x:Null />\n  </DockMainWindow.ContextMenu>\n  <DockMainWindow.Cursor>\n    <x:Null />\n  </DockMainWindow.Cursor>\n  <DockMainWindow.DataContext>\n    <x:Null />\n  </DockMainWindow.DataContext>\n  <DockMainWindow.FocusAdorner>\n    <x:Reference>__ReferenceID0</x:Reference>\n  </DockMainWindow.FocusAdorner>\n  <DockMainWindow.FontFamily>\n    <x:Reference>__ReferenceID1</x:Reference>\n  </DockMainWindow.FontFamily>\n  <DockMainWindow.Icon>\n    <x:Null />\n  </DockMainWindow.Icon>\n  <DockMainWindow.Margin>\n    <J3PM0:Thickness />\n  </DockMainWindow.Margin>\n  <DockMainWindow.Owner>\n    <x:Null />\n  </DockMainWindow.Owner>\n  <DockMainWindow.Padding>\n    <J3PM0:Thickness />\n  </DockMainWindow.Padding>\n  <DockMainWindow.Position>\n    <J3PM0:PixelPoint />\n  </DockMainWindow.Position>\n  <DockMainWindow.RenderTransform>\n    <x:Null />\n  </DockMainWindow.RenderTransform>\n  <DockMainWindow.RenderTransformOrigin>\n    <J3PM0:RelativePoint />\n  </DockMainWindow.RenderTransformOrigin>\n  <DockMainWindow.Resources>\n    <ac:ResourceDictionary />\n  </DockMainWindow.Resources>\n  <DockMainWindow.Styles>\n    <as:Styles>\n      <as:Styles.Resources>\n        <ac:ResourceDictionary />\n      </as:Styles.Resources>\n    </as:Styles>\n  </DockMainWindow.Styles>\n  <DockMainWindow.Tag>\n    <x:Null />\n  </DockMainWindow.Tag>\n  <DockMainWindow.Template>\n    <amxt:ControlTemplate>\n      <amxt:ControlTemplate.Content>\n        <s:Func x:TypeArguments=\"ERWN2:IServiceProvider, x:Object\" />\n      </amxt:ControlTemplate.Content>\n      <amxt:ControlTemplate.TargetType>\n        <x:Null />\n      </amxt:ControlTemplate.TargetType>\n    </amxt:ControlTemplate>\n  </DockMainWindow.Template>\n  <DockMainWindow.TitleBarContent>\n    <x:Null />\n  </DockMainWindow.TitleBarContent>\n  <DockMainWindow.Transitions>\n    <aa:Transitions ResetBehavior=\"Remove\" Validate=\"{x:Null}\" />\n  </DockMainWindow.Transitions>\n</DockMainWindow>";
    }
    
    
    
}